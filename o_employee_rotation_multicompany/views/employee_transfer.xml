<odoo>
    <data>


        <!-- Transfer -->

        <!-- Form -->
        <record id="view_employee_transfer_form" model="ir.ui.view">
            <field name="name">employee.transfer.form</field>
            <field name="model">employee.transfer</field>
            <field name="arch" type="xml">
                <form string="Employee Transfer">
                    <header>
                        <button name="submit_button" type="object" string="Submit" groups="hr.group_hr_user,hr.group_hr_manager,nus_base.group_department_manager" states="draft" class="oe_highlight" />
                        <button name="trans_approve" type="object" string="Transfer Manager Approve" groups="nus_base.group_department_manager" class="oe_highlight" invisible = "state, '!=', 'trans_manager' and is_manager,'!=',True" />
                        <button name="receive_approve" type="object" string="Receiving Manager Approve" groups="nus_base.group_department_manager" class="oe_highlight" invisible = "state, '!=', 'receive_manager' and is_manager,'!=',True"/>
                        <button name="officer_approve" type="object" string="HR Officer Approve" groups="hr.group_hr_user" states="hr_officer" class="oe_highlight" />
                        <button name="hr_approve" type="object" string="HR Section Head Approve" groups="hr.group_hr_manager" states="hr_manager" class="oe_highlight" />
                        <button name="md_approve" type="object" groups="nus_base.group_md" string="MD Approve" confirm="Are you sure to confirm this Transfer ?" states="md" class="oe_highlight" />
                        <button name="reject_button" type="object" string="Reject" confirm="Are you sure to Reject this Transfer ?" groups="hr.group_hr_manager" states="md,hr_manager" />
                        <button name="draft_button" type='object' string="Reset to Draft" groups="hr.group_hr_manager" states="rejected" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,trans_manager,receive_manager,hr_officer,hr_manager,md,approved" />
                    </header>
                    <sheet>
                        <group col="4" colspan="4" string="Transfer">
                            <field name="date" readonly = "state, '!=', 'draft'"/>
                            <field name="transfer_type" readonly = "state, '!=', 'draft'"  />
                            <field name="effective_date" required = "state, '!=', 'hr_manager'"/>
                            <field name="approved_date" />
                            <field name="grade" readonly = "state, '!=', 'draft'"/>
                            <field name="new_grade" readonly = "state, '!=', 'draft'" />
                        </group>
                        <group col="4" colspan="4" string="Employee Details">
                            <field name="employee_id" required = "state, '!=', 'draft'" options="{'no_create': True}" />
                            <field name="name" invisible = "state, '!=', 'draft'" readonly="1" />
                            <field name="company_id" readonly="1" />
                            <field name="department_id" readonly="1" />
                            <field name="job_id" readonly="1" />
                            <field name="is_manager_n" invisible="1" />
                            <field name="is_manager" invisible="1" />
                            <field name="active" invisible="1" />

                        </group>
                        <group string="Salary Details">
                            <field name="gross" />
                            <field name="apply_new_gross" readonly = "state, '!=', 'draft'" />
                            <field name="new_gross" readonly = "state, '!=', 'draft'" invisible = "apply_new_gross, '!=', True" options="{'no_create': True ,'no_open':True}" />

                        </group>
                        <group col="4" colspan="4" string="Transfer To">

                            <field name="n_company_id" readonly = "state, '!=', 'draft'" invisible = "transfer_type, '!=', 'company'" options="{'no_create': True ,'no_open':True}" />
                            
                            <field name="n_department_id" readonly = "state, '!=', 'draft'" options="{'no_create': True ,'no_open':True}" required="1" />
                            <field name="n_job_id" readonly = "state, '!=', 'draft'" options="{'no_create': True ,'no_open':True}" />
                        </group>
                        <group>
                            <field name="note" />
                            <field name="hr_comment" required = "state, '!=', 'hr_manager'" />
                        </group>
                    </sheet>

                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>


                </form>
            </field>
        </record>


        <!-- Tree -->

        <record id="view_employee_transfer_tree" model="ir.ui.view">
            <field name="name">employee.transfer.tree</field>
            <field name="model">employee.transfer</field>
            <field name="arch" type="xml">
                <tree string="Employee Transfer">
                    <field name="date" />
                    <field name="company_id" />
                    <field name="employee_id"/>
                    <field name="name" />
                    <field name="department_id" />
                    <field name="job_id" />
                    <field name="n_company_id" />
                    <field name="n_department_id" />
                    <field name="n_job_id" />
                    <field name="note" />
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- Action -->
        <record id="action_employee_transfer" model="ir.actions.act_window">
            <field name="name">Employee Transfer</field>
            <field name="res_model">employee.transfer</field>
            <field name="view_mode">tree,form</field>
        </record>


        <menuitem name="Employee Transfer" parent="hr_employee_rotation.employee_rotation_root" id="menu_employee_transfer" sequence="2" action="action_employee_transfer" />


    </data>
</odoo>
